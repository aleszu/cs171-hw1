<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>CS171 Homework 1</title>

  <style type="text/css">
  
caption {
	font-weight:bold;
	border-top:1px solid white;
	border-left:1px solid white;
	border-right:1px solid white;
	}

body {
	color: white;
	background-color:#3e3e3e;
	font-family:Tahoma, sans-serif;
	font-size:14px;
} 

table, th, td {
	color: white;
	text-align:center;
	border: 1px solid white;
	}
table {
	border-collapse:collapse;
	}

.zebra 
{
    background-color: #dddddd;
}

	
  </style>
</head>
<body>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script>
    d3.select("body")
		.append("h1")
		.text("Unemployment Rates for States");
	
	d3.text("unemp_states_us_nov_2013.tsv", function(error, data){
	  var parsed = d3.tsv.parseRows(data);
	  
	  console.log(data);
		  
      var table = d3.select("body").append("table");
	 
	  table
		.append("caption")
		.text("Unemployment Rates for States Monthly Rankings Seasonally Adjusted Dec. 2013p");
	  
	  var tr = table.append("thead").append("tr");
	  
	  var tbody = table.append("tbody");
	  
	  var th = tr.selectAll("th")
		.data(parsed[0])
		.enter()
		.append("th")
		.text(function(d,i) { 
			return d;	
		}
		);						
		
	  var states = parsed.slice(1);
		
	console.log(states);
	// states has the first row sliced out
	console.log(parsed);
	

	  var asCend = function(){
		rows.sort(function(a, b) {
		return d3.ascending(a, b);
		});
		};
	  
      var rows = tbody.selectAll("tr")
      .data(states)
      .enter()
      .append("tr")
	  .on("mouseover", function(){d3.select(this).style("background-color", "yellow");})
	  .on("mouseout", function(){d3.select(this).style("background-color", "#3e3e3e");})
	 // .attr("class", function(d,i) { return "zebra" + i; })
	  .on("click", function() {
		asCend();
		});
	  

		
		

		
		
	 // tbody.on("click", function(a, b){tr.sort(function(a, b){return b.value - a.value; });
	 // });
	 

	//  tbody.selectAll("th").on("click", function(a, b){return sortFunction(a[1], b[1]); });

	  
	//  .sort(function(a, b) {
	//  return d3.ascending(a[1], b[1]);
	//  });
    //  this worked for sorting the data
 	

// .on("click", function(e){sortCol();});
// console.log("Sorted:", rows.sort());
// var yScale = d3.scale.ordinal().domain(d3.range(parsed.length));		
// var sortCol = function(){tbody.selectAll("tr").sort(function(a, b) {return a - b;});	};			
	  
	
	 // .on('mouseover', function(d,i){d3.selectAll("tr" + i).style("background-color", "yellow");})
     // .on('mouseout', function(d,i){d3.selectAll("tr" + i).style("background-color", null);});\

	 
	 
	 
	// .style("color", function(states) {return "red"}); 
	// tr.classed("statesNames", true);
	// How do I style just the states column? I can't do states.style because states is essentially just parsed data.
	// I have to style the actual column.
	
	var cells = rows.selectAll("td")
      .data(function(row) {
        return d3.range(Object.keys(row).length).map(function(column, i) {
          return row[Object.keys(row)[i]];
          });
        })
      .enter()
      .append("td")
      .text(function(d) { return d; });
      });
	  
	  
	
	
	
  </script>
  
  
  
  
  
</body>
</html>
